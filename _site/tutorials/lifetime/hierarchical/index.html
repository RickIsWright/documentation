{"content":"\n<p>The Unity container allows creating hierarchies of child containers. This lifetime creates local singleton for each level of the hierarchy. So, when you resolve a type and this container does not have an instance of that type, the container will create new instance. Next time the type is resolved the same instance will be returned.</p>\n<p>If a child container is created and requested to resolve the type, the child container will create a new instance and store it for subsequent resolutions. Next time the child container requests to resolve the type, it will return the stored instance.</p>\n<p>If you have multiple children, each will resolve its own instance.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Hierarchical lifetime is controlled by <a href=\"xref:Unity.Lifetime.HierarchicalLifetimeManager\" data-linktype=\"external\">HierarchicalLifetimeManager</a> type. It forces each child container to resolve its own instance of the object and does not share one with the parent or child containers.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Hierarchical lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with hierarchical lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.Hierarchical);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.Hierarchical);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_Hierarchical\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_Hierarchical\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"../resolve/\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"../thread/\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","page":{"_appFaviconPath":"images/favicon.png","_appFooter":"<span>Copyright &copy; 2008â€“2019 <strong>Unity Container</strong> project</span>","_appLogoPath":"images/logo.svg","_appTitle":"Unity Container","_op_canonicalUrlPrefix":"https://en-us/","_op_gitContributorInformation":{"update_at":"8/27/2019","updated_at_date_time":"2019-08-27T20:54:29Z"},"_path":"tutorials/lifetime/hierarchical/index.html","_tocRel":"../../toc.json","canonical_url":"https:///en-us/tutorials/lifetime/hierarchical/","conceptual":"\n<p>The Unity container allows creating hierarchies of child containers. This lifetime creates local singleton for each level of the hierarchy. So, when you resolve a type and this container does not have an instance of that type, the container will create new instance. Next time the type is resolved the same instance will be returned.</p>\n<p>If a child container is created and requested to resolve the type, the child container will create a new instance and store it for subsequent resolutions. Next time the child container requests to resolve the type, it will return the stored instance.</p>\n<p>If you have multiple children, each will resolve its own instance.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Hierarchical lifetime is controlled by <a href=\"xref:Unity.Lifetime.HierarchicalLifetimeManager\" data-linktype=\"external\">HierarchicalLifetimeManager</a> type. It forces each child container to resolve its own instance of the object and does not share one with the parent or child containers.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Hierarchical lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with hierarchical lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.Hierarchical);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.Hierarchical);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_Hierarchical\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_Hierarchical\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"../resolve/\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"../thread/\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/hierarchical.md","depot_name":".","document_id":"ed59d502-58d2-b13f-0561-833ca822dd15","document_version_independent_id":"4a92b4ec-c719-f2a6-f0dc-cf933cc22b5d","gitcommit":"https://github.com/unitycontainer/documentation/blob/3fb58b282a3dc13782e99f27f44902dcc5ab6051/tutorials/lifetime/hierarchical.md","locale":"en-us","original_content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/hierarchical.md","original_content_git_url_template":"{repo}/blob/{branch}/tutorials/lifetime/hierarchical.md","rawTitle":"<h1 id=\"hierarchical-lifetime\">Hierarchical Lifetime</h1>","search.ms_docsetname":"","search.ms_product":"","search.ms_sitename":"Docs","site_name":"Docs","title":"Hierarchical Lifetime","uid":"Tutorial.Lifetime.Hierarchical","updated_at":"2019-08-27 08:54 PM","wordCount":216},"metadata":"<meta name=\"canonical_url\" content=\"https:///en-us/tutorials/lifetime/hierarchical/\" />\r\n<meta name=\"conceptual\" content=\"\n&lt;p&gt;The Unity container allows creating hierarchies of child containers. This lifetime creates local singleton for each level of the hierarchy. So, when you resolve a type and this container does not have an instance of that type, the container will create new instance. Next time the type is resolved the same instance will be returned.&lt;/p&gt;\n&lt;p&gt;If a child container is created and requested to resolve the type, the child container will create a new instance and store it for subsequent resolutions. Next time the child container requests to resolve the type, it will return the stored instance.&lt;/p&gt;\n&lt;p&gt;If you have multiple children, each will resolve its own instance.&lt;/p&gt;\n&lt;h2 id=&quot;the-lifetime-manager&quot;&gt;The Lifetime Manager&lt;/h2&gt;\n&lt;p&gt;Hierarchical lifetime is controlled by &lt;a href=&quot;xref:Unity.Lifetime.HierarchicalLifetimeManager&quot; data-linktype=&quot;external&quot;&gt;HierarchicalLifetimeManager&lt;/a&gt; type. It forces each child container to resolve its own instance of the object and does not share one with the parent or child containers.&lt;/p&gt;\n&lt;h2 id=&quot;registration&quot;&gt;Registration&lt;/h2&gt;\n&lt;p&gt;Hierarchical lifetime is only supported by &lt;a href=&quot;../../registration/type/registration/&quot; data-linktype=&quot;relative-path&quot;&gt;Type&lt;/a&gt; and &lt;a href=&quot;../../registration/factory/&quot; data-linktype=&quot;relative-path&quot;&gt;Factory&lt;/a&gt; registrations. &lt;a href=&quot;../../registration/instance/&quot; data-linktype=&quot;relative-path&quot;&gt;Instance&lt;/a&gt; registration does not support this lifetime.&lt;/p&gt;\n&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;\n&lt;p&gt;To create a Type registration with hierarchical lifetime:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterType&amp;lt;IService, Service&amp;gt;(TypeLifetime.Hierarchical);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or you could register a factory:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterFactory&amp;lt;IService&amp;gt;((c, t, n) =&amp;gt; new Service(),\n                                    FactoryLifetime.Hierarchical);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;NOTE&quot;&gt;\n&lt;h5&gt;NOTE&lt;/h5&gt;\n&lt;p&gt;Please note that registrations use &lt;a href=&quot;xref:Unity.TypeLifetime#Unity_TypeLifetime_Hierarchical&quot; data-linktype=&quot;external&quot;&gt;TypeLifetime&lt;/a&gt; and &lt;a href=&quot;xref:Unity.FactoryLifetime#Unity_FactoryLifetime_Hierarchical&quot; data-linktype=&quot;external&quot;&gt;FactoryLifetime&lt;/a&gt; respectively.&lt;/p&gt;\n&lt;/div&gt;\n&lt;h2 id=&quot;see-also&quot;&gt;See Also&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;../transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Transient Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../singleton/&quot; data-linktype=&quot;relative-path&quot;&gt;Singleton Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container_transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Transient&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;./&quot; data-linktype=&quot;relative-path&quot;&gt;Hierarchical Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../resolve/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Resolve Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../thread/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Thread Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../external/&quot; data-linktype=&quot;relative-path&quot;&gt;External Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\" />\r\n<meta name=\"content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/hierarchical.md\" />\r\n<meta name=\"depot_name\" content=\".\" />\r\n<meta name=\"document_id\" content=\"ed59d502-58d2-b13f-0561-833ca822dd15\" />\r\n<meta name=\"document_version_independent_id\" content=\"4a92b4ec-c719-f2a6-f0dc-cf933cc22b5d\" />\r\n<meta name=\"gitcommit\" content=\"https://github.com/unitycontainer/documentation/blob/3fb58b282a3dc13782e99f27f44902dcc5ab6051/tutorials/lifetime/hierarchical.md\" />\r\n<meta name=\"locale\" content=\"en-us\" />\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/hierarchical.md\" />\r\n<meta name=\"original_content_git_url_template\" content=\"{repo}/blob/{branch}/tutorials/lifetime/hierarchical.md\" />\r\n<meta name=\"rawTitle\" content=\"&lt;h1 id=&quot;hierarchical-lifetime&quot;&gt;Hierarchical Lifetime&lt;/h1&gt;\" />\r\n<meta name=\"search.ms_docsetname\" content=\"\" />\r\n<meta name=\"search.ms_product\" content=\"\" />\r\n<meta name=\"search.ms_sitename\" content=\"Docs\" />\r\n<meta name=\"site_name\" content=\"Docs\" />\r\n<meta name=\"title\" content=\"Hierarchical Lifetime\" />\r\n<meta name=\"uid\" content=\"Tutorial.Lifetime.Hierarchical\" />\r\n<meta name=\"updated_at\" content=\"2019-08-27 08:54 PM\" />\r\n<meta name=\"wordCount\" content=\"216\" />\r\n<meta name=\"is_dynamic_rendering\" content=\"true\" />\r\n","theme_rel":"..\\..\\..\\_themes"}