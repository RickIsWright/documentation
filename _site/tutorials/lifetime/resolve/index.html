{"content":"\n<p>This lifetime keeps a reference to an instance only for the duration of one resolution call. This type of lifetime is useful when you need to pass the same instance of the dependency to a different nodes of the resolution graph. Consider this scenario:</p>\n<pre><code class=\"lang-cs\">\nclass a {}\n\nclass b\n{\n    b(a arg)\n    {...}\n}\n\nclass c\n{\n    c(a arg1, b arg2)\n    {...}\n}\n\n</code></pre>\n<p>When you resolve type <code>c</code>, it depends on type <code>b</code> and type <code>a</code>. Type <code>b</code>, in turn, also depends on type <code>a</code>, and both types, <code>c</code> and <code>b</code>, require <code>a</code> to be the same instance.</p>\n<p>If type <code>a</code> is a singleton, the logic is easy. But if you require each instance of <code>c</code> to have a unique <code>a</code>, you could use per resolve lifetime. The instance of <code>a</code> will act as a singleton only during that one resolution. Next call to resolve the dependent type will create a new object.</p>\n<p>In the case of recursion, the singleton behavior is still applies and prevents circular dependency.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Per resolve lifetime is controlled by <a href=\"xref:Unity.Lifetime.PerResolveLifetimeManager\" data-linktype=\"external\">PerResolveLifetimeManager</a> type. This lifetime manager effectively implements a singleton behavior for objects on a per-resolve basis.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Per resolve lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with per resolve lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.PerResolve);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.PerResolve);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_PerResolve\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerResolve\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"../hierarchical/\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"../thread/\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","page":{"_appFaviconPath":"images/favicon.png","_appFooter":"<span>Copyright &copy; 2008â€“2019 <strong>Unity Container</strong> project</span>","_appLogoPath":"images/logo.svg","_appTitle":"Unity Container","_op_canonicalUrlPrefix":"https://en-us/","_op_gitContributorInformation":{"update_at":"3/24/2019","updated_at_date_time":"2019-03-24T19:28:59Z"},"_path":"tutorials/lifetime/resolve/index.html","_tocRel":"../../toc.json","canonical_url":"https:///en-us/tutorials/lifetime/resolve/","conceptual":"\n<p>This lifetime keeps a reference to an instance only for the duration of one resolution call. This type of lifetime is useful when you need to pass the same instance of the dependency to a different nodes of the resolution graph. Consider this scenario:</p>\n<pre><code class=\"lang-cs\">\nclass a {}\n\nclass b\n{\n    b(a arg)\n    {...}\n}\n\nclass c\n{\n    c(a arg1, b arg2)\n    {...}\n}\n\n</code></pre>\n<p>When you resolve type <code>c</code>, it depends on type <code>b</code> and type <code>a</code>. Type <code>b</code>, in turn, also depends on type <code>a</code>, and both types, <code>c</code> and <code>b</code>, require <code>a</code> to be the same instance.</p>\n<p>If type <code>a</code> is a singleton, the logic is easy. But if you require each instance of <code>c</code> to have a unique <code>a</code>, you could use per resolve lifetime. The instance of <code>a</code> will act as a singleton only during that one resolution. Next call to resolve the dependent type will create a new object.</p>\n<p>In the case of recursion, the singleton behavior is still applies and prevents circular dependency.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Per resolve lifetime is controlled by <a href=\"xref:Unity.Lifetime.PerResolveLifetimeManager\" data-linktype=\"external\">PerResolveLifetimeManager</a> type. This lifetime manager effectively implements a singleton behavior for objects on a per-resolve basis.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Per resolve lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with per resolve lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.PerResolve);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.PerResolve);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_PerResolve\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerResolve\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"../hierarchical/\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"../thread/\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/resolve.md","depot_name":".","document_id":"0d58f2b4-f70d-efe0-5963-be66ccaab8f2","document_version_independent_id":"a1db04ca-fb22-ecd3-2542-e1a1f9d0cc0b","gitcommit":"https://github.com/unitycontainer/documentation/blob/6a3bce3e65127863d30af8960c9eb3393e9181c1/tutorials/lifetime/resolve.md","locale":"en-us","original_content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/resolve.md","original_content_git_url_template":"{repo}/blob/{branch}/tutorials/lifetime/resolve.md","rawTitle":"<h1 id=\"per-resolve-lifetime\">Per Resolve Lifetime</h1>","search.ms_docsetname":"","search.ms_product":"","search.ms_sitename":"Docs","site_name":"Docs","title":"Per Resolve Lifetime","uid":"Tutorial.Lifetime.Resolve","updated_at":"2019-03-24 07:28 PM","wordCount":269},"metadata":"<meta name=\"canonical_url\" content=\"https:///en-us/tutorials/lifetime/resolve/\" />\r\n<meta name=\"conceptual\" content=\"\n&lt;p&gt;This lifetime keeps a reference to an instance only for the duration of one resolution call. This type of lifetime is useful when you need to pass the same instance of the dependency to a different nodes of the resolution graph. Consider this scenario:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-cs&quot;&gt;\nclass a {}\n\nclass b\n{\n    b(a arg)\n    {...}\n}\n\nclass c\n{\n    c(a arg1, b arg2)\n    {...}\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;When you resolve type &lt;code&gt;c&lt;/code&gt;, it depends on type &lt;code&gt;b&lt;/code&gt; and type &lt;code&gt;a&lt;/code&gt;. Type &lt;code&gt;b&lt;/code&gt;, in turn, also depends on type &lt;code&gt;a&lt;/code&gt;, and both types, &lt;code&gt;c&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt;, require &lt;code&gt;a&lt;/code&gt; to be the same instance.&lt;/p&gt;\n&lt;p&gt;If type &lt;code&gt;a&lt;/code&gt; is a singleton, the logic is easy. But if you require each instance of &lt;code&gt;c&lt;/code&gt; to have a unique &lt;code&gt;a&lt;/code&gt;, you could use per resolve lifetime. The instance of &lt;code&gt;a&lt;/code&gt; will act as a singleton only during that one resolution. Next call to resolve the dependent type will create a new object.&lt;/p&gt;\n&lt;p&gt;In the case of recursion, the singleton behavior is still applies and prevents circular dependency.&lt;/p&gt;\n&lt;h2 id=&quot;the-lifetime-manager&quot;&gt;The Lifetime Manager&lt;/h2&gt;\n&lt;p&gt;Per resolve lifetime is controlled by &lt;a href=&quot;xref:Unity.Lifetime.PerResolveLifetimeManager&quot; data-linktype=&quot;external&quot;&gt;PerResolveLifetimeManager&lt;/a&gt; type. This lifetime manager effectively implements a singleton behavior for objects on a per-resolve basis.&lt;/p&gt;\n&lt;h2 id=&quot;registration&quot;&gt;Registration&lt;/h2&gt;\n&lt;p&gt;Per resolve lifetime is only supported by &lt;a href=&quot;../../registration/type/registration/&quot; data-linktype=&quot;relative-path&quot;&gt;Type&lt;/a&gt; and &lt;a href=&quot;../../registration/factory/&quot; data-linktype=&quot;relative-path&quot;&gt;Factory&lt;/a&gt; registrations. &lt;a href=&quot;../../registration/instance/&quot; data-linktype=&quot;relative-path&quot;&gt;Instance&lt;/a&gt; registration does not support this lifetime.&lt;/p&gt;\n&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;\n&lt;p&gt;To create a Type registration with per resolve lifetime:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterType&amp;lt;IService, Service&amp;gt;(TypeLifetime.PerResolve);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or you could register a factory:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterFactory&amp;lt;IService&amp;gt;((c, t, n) =&amp;gt; new Service(),\n                                    FactoryLifetime.PerResolve);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;NOTE&quot;&gt;\n&lt;h5&gt;NOTE&lt;/h5&gt;\n&lt;p&gt;Please note that registrations use &lt;a href=&quot;xref:Unity.TypeLifetime#Unity_TypeLifetime_PerResolve&quot; data-linktype=&quot;external&quot;&gt;TypeLifetime&lt;/a&gt; and &lt;a href=&quot;xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerResolve&quot; data-linktype=&quot;external&quot;&gt;FactoryLifetime&lt;/a&gt; respectively.&lt;/p&gt;\n&lt;/div&gt;\n&lt;h2 id=&quot;see-also&quot;&gt;See Also&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;../transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Transient Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../singleton/&quot; data-linktype=&quot;relative-path&quot;&gt;Singleton Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container_transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Transient&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../hierarchical/&quot; data-linktype=&quot;relative-path&quot;&gt;Hierarchical Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;./&quot; data-linktype=&quot;relative-path&quot;&gt;Per Resolve Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../thread/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Thread Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../external/&quot; data-linktype=&quot;relative-path&quot;&gt;External Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\" />\r\n<meta name=\"content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/resolve.md\" />\r\n<meta name=\"depot_name\" content=\".\" />\r\n<meta name=\"document_id\" content=\"0d58f2b4-f70d-efe0-5963-be66ccaab8f2\" />\r\n<meta name=\"document_version_independent_id\" content=\"a1db04ca-fb22-ecd3-2542-e1a1f9d0cc0b\" />\r\n<meta name=\"gitcommit\" content=\"https://github.com/unitycontainer/documentation/blob/6a3bce3e65127863d30af8960c9eb3393e9181c1/tutorials/lifetime/resolve.md\" />\r\n<meta name=\"locale\" content=\"en-us\" />\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/resolve.md\" />\r\n<meta name=\"original_content_git_url_template\" content=\"{repo}/blob/{branch}/tutorials/lifetime/resolve.md\" />\r\n<meta name=\"rawTitle\" content=\"&lt;h1 id=&quot;per-resolve-lifetime&quot;&gt;Per Resolve Lifetime&lt;/h1&gt;\" />\r\n<meta name=\"search.ms_docsetname\" content=\"\" />\r\n<meta name=\"search.ms_product\" content=\"\" />\r\n<meta name=\"search.ms_sitename\" content=\"Docs\" />\r\n<meta name=\"site_name\" content=\"Docs\" />\r\n<meta name=\"title\" content=\"Per Resolve Lifetime\" />\r\n<meta name=\"uid\" content=\"Tutorial.Lifetime.Resolve\" />\r\n<meta name=\"updated_at\" content=\"2019-03-24 07:28 PM\" />\r\n<meta name=\"wordCount\" content=\"269\" />\r\n<meta name=\"is_dynamic_rendering\" content=\"true\" />\r\n","theme_rel":"..\\..\\..\\_themes"}