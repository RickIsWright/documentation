{"content":"\n<p>Per thread lifetime means a new instance of the registered <a href=\"xref:System.Type\" data-linktype=\"external\">Type</a> will be created once per each thread. In other words, if a <code>Resolve&lt;T&gt;()</code> method is called on a thread the first time, it will return a new object. Each subsequent call to <code>Resolve&lt;T&gt;()</code>, or when the dependency mechanism injects instances of the type into other classes on the same thread, the container will return the same object.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Per thread lifetime is controlled by <a href=\"xref:Unity.Lifetime.PerThreadLifetimeManager\" data-linktype=\"external\">PerThreadLifetimeManager</a> type. This lifetime manager effectively implements a singleton behavior for objects on a per-thread basis.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Per thread lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with per thread lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.PerThread);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.PerThread);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_PerThread\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerThread\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"../hierarchical/\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"../resolve/\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","page":{"_appFaviconPath":"images/favicon.png","_appFooter":"<span>Copyright &copy; 2008â€“2019 <strong>Unity Container</strong> project</span>","_appLogoPath":"images/logo.svg","_appTitle":"Unity Container","_op_canonicalUrlPrefix":"https://en-us/","_op_gitContributorInformation":{"update_at":"3/23/2019","updated_at_date_time":"2019-03-23T00:23:42Z"},"_path":"tutorials/lifetime/thread/index.html","_tocRel":"../../toc.json","canonical_url":"https:///en-us/tutorials/lifetime/thread/","conceptual":"\n<p>Per thread lifetime means a new instance of the registered <a href=\"xref:System.Type\" data-linktype=\"external\">Type</a> will be created once per each thread. In other words, if a <code>Resolve&lt;T&gt;()</code> method is called on a thread the first time, it will return a new object. Each subsequent call to <code>Resolve&lt;T&gt;()</code>, or when the dependency mechanism injects instances of the type into other classes on the same thread, the container will return the same object.</p>\n<h2 id=\"the-lifetime-manager\">The Lifetime Manager</h2>\n<p>Per thread lifetime is controlled by <a href=\"xref:Unity.Lifetime.PerThreadLifetimeManager\" data-linktype=\"external\">PerThreadLifetimeManager</a> type. This lifetime manager effectively implements a singleton behavior for objects on a per-thread basis.</p>\n<h2 id=\"registration\">Registration</h2>\n<p>Per thread lifetime is only supported by <a href=\"../../registration/type/registration/\" data-linktype=\"relative-path\">Type</a> and <a href=\"../../registration/factory/\" data-linktype=\"relative-path\">Factory</a> registrations. <a href=\"../../registration/instance/\" data-linktype=\"relative-path\">Instance</a> registration does not support this lifetime.</p>\n<h3 id=\"example\">Example</h3>\n<p>To create a Type registration with per thread lifetime:</p>\n<pre><code class=\"lang-C#\">container.RegisterType&lt;IService, Service&gt;(TypeLifetime.PerThread);\n</code></pre>\n<p>or you could register a factory:</p>\n<pre><code class=\"lang-C#\">container.RegisterFactory&lt;IService&gt;((c, t, n) =&gt; new Service(),\n                                    FactoryLifetime.PerThread);\n</code></pre>\n<div class=\"NOTE\">\n<h5>NOTE</h5>\n<p>Please note that registrations use <a href=\"xref:Unity.TypeLifetime#Unity_TypeLifetime_PerThread\" data-linktype=\"external\">TypeLifetime</a> and <a href=\"xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerThread\" data-linktype=\"external\">FactoryLifetime</a> respectively.</p>\n</div>\n<h2 id=\"see-also\">See Also</h2>\n<ul>\n<li><a href=\"../transient/\" data-linktype=\"relative-path\">Transient Lifetime</a></li>\n<li><a href=\"../singleton/\" data-linktype=\"relative-path\">Singleton Lifetime</a></li>\n<li><a href=\"../container/\" data-linktype=\"relative-path\">Per Container Lifetime</a></li>\n<li><a href=\"../container_transient/\" data-linktype=\"relative-path\">Per Container Transient</a></li>\n<li><a href=\"../hierarchical/\" data-linktype=\"relative-path\">Hierarchical Lifetime</a></li>\n<li><a href=\"../resolve/\" data-linktype=\"relative-path\">Per Resolve Lifetime</a></li>\n<li><a href=\"./\" data-linktype=\"relative-path\">Per Thread Lifetime</a></li>\n<li><a href=\"../external/\" data-linktype=\"relative-path\">External Lifetime</a></li>\n</ul>\n","content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/thread.md","depot_name":".","document_id":"ab2df0fc-9e21-ded4-29f6-963493984600","document_version_independent_id":"572b5b1f-4bc4-bd1e-0e0a-4b89f5fe2529","gitcommit":"https://github.com/unitycontainer/documentation/blob/bb6dc876c93ae8f48e84e24ed81ea6122119f554/tutorials/lifetime/thread.md","locale":"en-us","original_content_git_url":"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/thread.md","original_content_git_url_template":"{repo}/blob/{branch}/tutorials/lifetime/thread.md","rawTitle":"<h1 id=\"per-thread-lifetime\">Per Thread Lifetime</h1>","search.ms_docsetname":"","search.ms_product":"","search.ms_sitename":"Docs","site_name":"Docs","title":"Per Thread Lifetime","uid":"Tutorial.Lifetime.Thread","updated_at":"2019-03-23 12:23 AM","wordCount":169},"metadata":"<meta name=\"canonical_url\" content=\"https:///en-us/tutorials/lifetime/thread/\" />\r\n<meta name=\"conceptual\" content=\"\n&lt;p&gt;Per thread lifetime means a new instance of the registered &lt;a href=&quot;xref:System.Type&quot; data-linktype=&quot;external&quot;&gt;Type&lt;/a&gt; will be created once per each thread. In other words, if a &lt;code&gt;Resolve&amp;lt;T&amp;gt;()&lt;/code&gt; method is called on a thread the first time, it will return a new object. Each subsequent call to &lt;code&gt;Resolve&amp;lt;T&amp;gt;()&lt;/code&gt;, or when the dependency mechanism injects instances of the type into other classes on the same thread, the container will return the same object.&lt;/p&gt;\n&lt;h2 id=&quot;the-lifetime-manager&quot;&gt;The Lifetime Manager&lt;/h2&gt;\n&lt;p&gt;Per thread lifetime is controlled by &lt;a href=&quot;xref:Unity.Lifetime.PerThreadLifetimeManager&quot; data-linktype=&quot;external&quot;&gt;PerThreadLifetimeManager&lt;/a&gt; type. This lifetime manager effectively implements a singleton behavior for objects on a per-thread basis.&lt;/p&gt;\n&lt;h2 id=&quot;registration&quot;&gt;Registration&lt;/h2&gt;\n&lt;p&gt;Per thread lifetime is only supported by &lt;a href=&quot;../../registration/type/registration/&quot; data-linktype=&quot;relative-path&quot;&gt;Type&lt;/a&gt; and &lt;a href=&quot;../../registration/factory/&quot; data-linktype=&quot;relative-path&quot;&gt;Factory&lt;/a&gt; registrations. &lt;a href=&quot;../../registration/instance/&quot; data-linktype=&quot;relative-path&quot;&gt;Instance&lt;/a&gt; registration does not support this lifetime.&lt;/p&gt;\n&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;\n&lt;p&gt;To create a Type registration with per thread lifetime:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterType&amp;lt;IService, Service&amp;gt;(TypeLifetime.PerThread);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or you could register a factory:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=&quot;lang-C#&quot;&gt;container.RegisterFactory&amp;lt;IService&amp;gt;((c, t, n) =&amp;gt; new Service(),\n                                    FactoryLifetime.PerThread);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;NOTE&quot;&gt;\n&lt;h5&gt;NOTE&lt;/h5&gt;\n&lt;p&gt;Please note that registrations use &lt;a href=&quot;xref:Unity.TypeLifetime#Unity_TypeLifetime_PerThread&quot; data-linktype=&quot;external&quot;&gt;TypeLifetime&lt;/a&gt; and &lt;a href=&quot;xref:Unity.FactoryLifetime#Unity_FactoryLifetime_PerThread&quot; data-linktype=&quot;external&quot;&gt;FactoryLifetime&lt;/a&gt; respectively.&lt;/p&gt;\n&lt;/div&gt;\n&lt;h2 id=&quot;see-also&quot;&gt;See Also&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;../transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Transient Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../singleton/&quot; data-linktype=&quot;relative-path&quot;&gt;Singleton Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../container_transient/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Container Transient&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../hierarchical/&quot; data-linktype=&quot;relative-path&quot;&gt;Hierarchical Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../resolve/&quot; data-linktype=&quot;relative-path&quot;&gt;Per Resolve Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;./&quot; data-linktype=&quot;relative-path&quot;&gt;Per Thread Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;../external/&quot; data-linktype=&quot;relative-path&quot;&gt;External Lifetime&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\" />\r\n<meta name=\"content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/thread.md\" />\r\n<meta name=\"depot_name\" content=\".\" />\r\n<meta name=\"document_id\" content=\"ab2df0fc-9e21-ded4-29f6-963493984600\" />\r\n<meta name=\"document_version_independent_id\" content=\"572b5b1f-4bc4-bd1e-0e0a-4b89f5fe2529\" />\r\n<meta name=\"gitcommit\" content=\"https://github.com/unitycontainer/documentation/blob/bb6dc876c93ae8f48e84e24ed81ea6122119f554/tutorials/lifetime/thread.md\" />\r\n<meta name=\"locale\" content=\"en-us\" />\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/unitycontainer/documentation/blob/develop/tutorials/lifetime/thread.md\" />\r\n<meta name=\"original_content_git_url_template\" content=\"{repo}/blob/{branch}/tutorials/lifetime/thread.md\" />\r\n<meta name=\"rawTitle\" content=\"&lt;h1 id=&quot;per-thread-lifetime&quot;&gt;Per Thread Lifetime&lt;/h1&gt;\" />\r\n<meta name=\"search.ms_docsetname\" content=\"\" />\r\n<meta name=\"search.ms_product\" content=\"\" />\r\n<meta name=\"search.ms_sitename\" content=\"Docs\" />\r\n<meta name=\"site_name\" content=\"Docs\" />\r\n<meta name=\"title\" content=\"Per Thread Lifetime\" />\r\n<meta name=\"uid\" content=\"Tutorial.Lifetime.Thread\" />\r\n<meta name=\"updated_at\" content=\"2019-03-23 12:23 AM\" />\r\n<meta name=\"wordCount\" content=\"169\" />\r\n<meta name=\"is_dynamic_rendering\" content=\"true\" />\r\n","theme_rel":"..\\..\\..\\_themes"}